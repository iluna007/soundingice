const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mapbox-gl--tciIPl5.js","assets/cookie-BX9QSSmL.js","assets/mapbox-gl-CYq10Fru.css"])))=>i.map(i=>d[i]);
import{a as u}from"./react-V8IiPZyx.js";import{r as P}from"./react-dom-b-nR2FO5.js";const O="modulepreload",Z=function(e){return"/"+e},_={},F=function(t,o,i){let n=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.allSettled(o.map(l=>{if(l=Z(l),l in _)return;_[l]=!0;const a=l.endsWith(".css"),d=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":O,a||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),a)return new Promise((z,N)=>{f.addEventListener("load",z),f.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},U=u.createContext(null);function E(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function C(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function L(e,t){const o=t.viewState||t;let i=!1;if("longitude"in o&&"latitude"in o){const n=e.center;e.center=new n.constructor(o.longitude,o.latitude),i=i||n!==e.center}if("zoom"in o){const n=e.zoom;e.zoom=o.zoom,i=i||n!==e.zoom}if("bearing"in o){const n=e.bearing;e.bearing=o.bearing,i=i||n!==e.bearing}if("pitch"in o){const n=e.pitch;e.pitch=o.pitch,i=i||n!==e.pitch}return o.padding&&!e.isPaddingEqual(o.padding)&&(i=!0,e.padding=o.padding),i}const D=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function S(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const i of e.layers)t[i.id]=i;const o=e.layers.map(i=>{const n=t[i.ref];let r=null;if("interactive"in i&&(r={...i},delete r.interactive),n){r=r||{...i},delete r.ref;for(const s of D)s in n&&(r[s]=n[s])}return r||i});return{...e,layers:o}}function j(e,t){const o=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0;return o===n&&i===r}function m(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!m(e[o],t[o]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const n of o)if(!t.hasOwnProperty(n)||!m(e[n],t[n]))return!1;return!0}return!1}var M={};const w={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},y={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},b={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},I=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],W=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class g{constructor(t,o,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=n=>{const r=this.props[b[n.type]];r&&r(n)},this._onPointerEvent=n=>{(n.type==="mousemove"||n.type==="mouseout")&&this._updateHover(n);const r=this.props[w[n.type]];if(r){if(this.props.interactiveLayerIds&&n.type!=="mouseover"&&n.type!=="mouseout"){const s=this._hoveredFeatures||this._map.queryRenderedFeatures(n.point,{layers:this.props.interactiveLayerIds});if(!s.length)return;n.features=s}r(n),delete n.features}},this._onCameraEvent=n=>{if(!this._internalUpdate){const r=this.props[y[n.type]];r&&r(n)}n.type in this._deferredEvents&&(this._deferredEvents[n.type]=!1)},this._MapClass=t,this.props=o,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const o=this.props;this.props=t;const i=this._updateSettings(t,o);i&&(this._renderTransform=E(this._map.transform));const n=this._updateSize(t),r=this._updateViewState(t,!0);this._updateStyle(t,o),this._updateStyleComponents(t,o),this._updateHandlers(t,o),(i||n||r&&!this._map.isMoving())&&this.redraw()}static reuse(t,o){const i=g.savedMaps.pop();if(!i)return null;const n=i.map,r=n.getContainer();for(o.className=r.className;r.childNodes.length>0;)o.appendChild(r.childNodes[0]);return n._container=o,t.initialViewState&&i._updateViewState(t.initialViewState,!1),n.resize(),i.setProps({...t,styleDiffing:!1}),n.isStyleLoaded()?n.fire("load"):n.once("styledata",()=>n.fire("load")),i}_initialize(t){const{props:o}=this,i={...o,...o.initialViewState,accessToken:o.mapboxAccessToken||B()||null,container:t,style:S(o.mapStyle)},n=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[n.longitude||0,n.latitude||0],zoom:n.zoom||0,pitch:n.pitch||0,bearing:n.bearing||0}),o.gl){const a=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=a,o.gl)}const r=new this._MapClass(i);n.padding&&r.setPadding(n.padding),o.cursor&&(r.getCanvas().style.cursor=o.cursor),this._renderTransform=E(r.transform);const s=r._render;r._render=a=>{this._inRender=!0,s.call(r,a),this._inRender=!1};const c=r._renderTaskQueue.run;r._renderTaskQueue.run=a=>{c.call(r._renderTaskQueue,a),this._onBeforeRepaint()},r.on("render",()=>this._onAfterRepaint());const l=r.fire;r.fire=this._fireEvent.bind(this,l),r.on("resize",()=>{this._renderTransform.resize(r.transform.width,r.transform.height)}),r.on("styledata",()=>this._updateStyleComponents(this.props,{})),r.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const a in w)r.on(a,this._onPointerEvent);for(const a in y)r.on(a,this._onCameraEvent);for(const a in b)r.on(a,this._onEvent);this._map=r}recycle(){g.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:o}=t;if(o){const i=this._map;if(o.width!==i.transform.width||o.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(t,o){if(this._internalUpdate)return!1;const i=this._map,n=this._renderTransform,{zoom:r,pitch:s,bearing:c}=n,l=L(n,{...C(i.transform),...t});if(l&&o){const a=this._deferredEvents;a.move=!0,a.zoom||(a.zoom=r!==n.zoom),a.rotate||(a.rotate=c!==n.bearing),a.pitch||(a.pitch=s!==n.pitch)}return i.isMoving()||L(i.transform,t),l}_updateSettings(t,o){const i=this._map;let n=!1;for(const r of I)r in t&&!m(t[r],o[r])&&(n=!0,i[`set${r[0].toUpperCase()}${r.slice(1)}`](t[r]));return n}_updateStyle(t,o){if(t.cursor!==o.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==o.mapStyle){const i={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(i.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(S(t.mapStyle),i),!0}return!1}_updateStyleComponents(t,o){const i=this._map;let n=!1;return i.style.loaded()&&("light"in t&&!m(t.light,o.light)&&(n=!0,i.setLight(t.light)),"fog"in t&&!m(t.fog,o.fog)&&(n=!0,i.setFog(t.fog)),"terrain"in t&&!m(t.terrain,o.terrain)&&(!t.terrain||i.getSource(t.terrain.source))&&(n=!0,i.setTerrain(t.terrain))),n}_updateHandlers(t,o){const i=this._map;let n=!1;for(const r of W){const s=t[r];m(s,o[r])||(n=!0,s?i[r].enable(s):i[r].disable())}return n}_updateHover(t){var o;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const r=t.type,s=((o=this._hoveredFeatures)===null||o===void 0?void 0:o.length)>0;let c;if(r==="mousemove")try{c=this._map.queryRenderedFeatures(t.point,{layers:i.interactiveLayerIds})}catch{c=[]}else c=[];const l=c.length>0;!l&&s&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,l&&!s&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=r}else this._hoveredFeatures=null}_fireEvent(t,o,i){const n=this._map,r=n.transform,s=typeof o=="string"?o:o.type;return s==="move"&&this._updateViewState(this.props,!1),s in y&&(typeof o=="object"&&(o.viewState=C(r)),this._map.isMoving())?(n.transform=this._renderTransform,t.call(n,o,i),n.transform=r,n):(t.call(n,o,i),n)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;const o=this._map.transform;this._map.transform=this._renderTransform,this._map.painter.transform=this._renderTransform,this._onAfterRepaint=()=>{(o.elevation=this._renderTransform.elevation)&&o.updateElevation(!1),this._map.transform=o}}}g.savedMaps=[];function B(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||M.MapboxAccessToken}catch{}try{e=e||M.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const H=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function V(e,t){if(!e)return null;const o=e.map,i={getMap:()=>o,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>e.transform.locationPoint(t.LngLat.convert(n)),unproject:n=>e.transform.pointLocation(t.Point.convert(n))};for(const n of $(o))!(n in i)&&!H.includes(n)&&(i[n]=o[n].bind(o));return i}function $(e){const t=new Set;let o=e;for(;o;){for(const i of Object.getOwnPropertyNames(o))i[0]!=="_"&&typeof e[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&t.add(i);o=Object.getPrototypeOf(o)}return Array.from(t)}const q=typeof document<"u"?u.useLayoutEffect:u.useEffect,G=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Q(e,t){for(const o of G)o in t&&(e[o]=t[o]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,o=>{o&&console.error(o)},!1)}const p=u.createContext(null),K={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},R=u.forwardRef((e,t)=>{const o=u.useContext(U),[i,n]=u.useState(null),r=u.useRef(),{current:s}=u.useRef({mapLib:null,map:null});u.useEffect(()=>{const l=e.mapLib;let a=!0,d;return Promise.resolve(l||F(()=>import("./mapbox-gl--tciIPl5.js").then(f=>f.m),__vite__mapDeps([0,1,2]))).then(f=>{if(a){if(f.Map||(f=f.default),!f||!f.Map)throw new Error("Invalid mapLib");if(f.supported(e))Q(f,e),e.reuseMaps&&(d=g.reuse(e,r.current)),d||(d=new g(f.Map,e,r.current)),s.map=V(d,f),s.mapLib=f,n(d),o==null||o.onMapMount(s.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(f=>{e.onError({type:"error",target:null,originalEvent:null,error:f})}),()=>{a=!1,d&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?d.recycle():d.destroy())}},[]),q(()=>{i&&i.setProps(e)}),u.useImperativeHandle(t,()=>s.map,[i]);const c=u.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]);return u.createElement("div",{id:e.id,ref:r,style:c},i&&u.createElement(p.Provider,{value:s},e.children))});R.displayName="Map";R.defaultProps=K;const J=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function h(e,t){if(!e||!t)return;const o=e.style;for(const i in t){const n=t[i];Number.isFinite(n)&&!J.test(i)?o[i]=`${n}px`:o[i]=n}}const X={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function x(e){const{map:t,mapLib:o}=u.useContext(p),i=u.useRef({props:e});i.current.props=e;const n=u.useMemo(()=>{let r=!1;u.Children.forEach(e.children,l=>{l&&(r=!0)});const s={...e,element:r?document.createElement("div"):null},c=new o.Marker(s).setLngLat([e.longitude,e.latitude]);return c.getElement().addEventListener("click",l=>{var a,d;(d=(a=i.current.props).onClick)===null||d===void 0||d.call(a,{type:"click",target:c,originalEvent:l})}),c.on("dragstart",l=>{var a,d;const f=l;f.lngLat=n.getLngLat(),(d=(a=i.current.props).onDragStart)===null||d===void 0||d.call(a,f)}),c.on("drag",l=>{var a,d;const f=l;f.lngLat=n.getLngLat(),(d=(a=i.current.props).onDrag)===null||d===void 0||d.call(a,f)}),c.on("dragend",l=>{var a,d;const f=l;f.lngLat=n.getLngLat(),(d=(a=i.current.props).onDragEnd)===null||d===void 0||d.call(a,f)}),c},[]);return u.useEffect(()=>(n.addTo(t.getMap()),()=>{n.remove()}),[]),u.useEffect(()=>{h(n.getElement(),e.style)},[e.style]),(n.getLngLat().lng!==e.longitude||n.getLngLat().lat!==e.latitude)&&n.setLngLat([e.longitude,e.latitude]),e.offset&&!j(n.getOffset(),e.offset)&&n.setOffset(e.offset),n.isDraggable()!==e.draggable&&n.setDraggable(e.draggable),n.getRotation()!==e.rotation&&n.setRotation(e.rotation),n.getRotationAlignment()!==e.rotationAlignment&&n.setRotationAlignment(e.rotationAlignment),n.getPitchAlignment()!==e.pitchAlignment&&n.setPitchAlignment(e.pitchAlignment),n.getPopup()!==e.popup&&n.setPopup(e.popup),P.createPortal(e.children,n.getElement())}x.defaultProps=X;const ae=u.memo(x);function T(e){return new Set(e?e.trim().split(/\s+/):[])}function Y(e){const{map:t,mapLib:o}=u.useContext(p),i=u.useMemo(()=>document.createElement("div"),[]),n=u.useRef({props:e});n.current.props=e;const r=u.useMemo(()=>{const s={...e},c=new o.Popup(s).setLngLat([e.longitude,e.latitude]);return c.once("open",l=>{var a,d;(d=(a=n.current.props).onOpen)===null||d===void 0||d.call(a,l)}),c},[]);if(u.useEffect(()=>{const s=c=>{var l,a;(a=(l=n.current.props).onClose)===null||a===void 0||a.call(l,c)};return r.on("close",s),r.setDOMContent(i).addTo(t.getMap()),()=>{r.off("close",s),r.isOpen()&&r.remove()}},[]),u.useEffect(()=>{h(r.getElement(),e.style)},[e.style]),r.isOpen()&&((r.getLngLat().lng!==e.longitude||r.getLngLat().lat!==e.latitude)&&r.setLngLat([e.longitude,e.latitude]),e.offset&&!m(r.options.offset,e.offset)&&r.setOffset(e.offset),(r.options.anchor!==e.anchor||r.options.maxWidth!==e.maxWidth)&&(r.options.anchor=e.anchor,r.setMaxWidth(e.maxWidth)),r.options.className!==e.className)){const s=T(r.options.className),c=T(e.className);for(const l of s)c.has(l)||r.removeClassName(l);for(const l of c)s.has(l)||r.addClassName(l);r.options.className=e.className}return P.createPortal(e.children,i)}const se=u.memo(Y);function v(e,t,o){const i=u.useContext(p),n=u.useMemo(()=>e(i),[]);return u.useEffect(()=>{var r;const{map:s}=i;return s.hasControl(n)||s.addControl(n,(r=t)===null||r===void 0?void 0:r.position),()=>{typeof t=="function"&&t(i),s.hasControl(n)&&s.removeControl(n)}},[]),n}function ee(e){const t=v(({mapLib:o})=>new o.AttributionControl(e),{position:e.position});return u.useEffect(()=>{h(t._container,e.style)},[e.style]),null}u.memo(ee);function te(e){const t=v(({mapLib:o})=>new o.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return u.useEffect(()=>{h(t._controlContainer,e.style)},[e.style]),null}u.memo(te);const k=u.forwardRef((e,t)=>{const o=u.useRef({props:e}),i=v(({mapLib:n})=>{const r=new n.GeolocateControl(e),s=r._setupUI;return r._setupUI=c=>{r._container.hasChildNodes()||s(c)},r.on("geolocate",c=>{var l,a;(a=(l=o.current.props).onGeolocate)===null||a===void 0||a.call(l,c)}),r.on("error",c=>{var l,a;(a=(l=o.current.props).onError)===null||a===void 0||a.call(l,c)}),r.on("outofmaxbounds",c=>{var l,a;(a=(l=o.current.props).onOutOfMaxBounds)===null||a===void 0||a.call(l,c)}),r.on("trackuserlocationstart",c=>{var l,a;(a=(l=o.current.props).onTrackUserLocationStart)===null||a===void 0||a.call(l,c)}),r.on("trackuserlocationend",c=>{var l,a;(a=(l=o.current.props).onTrackUserLocationEnd)===null||a===void 0||a.call(l,c)}),r},{position:e.position});return o.current.props=e,u.useImperativeHandle(t,()=>({trigger:()=>i.trigger()}),[]),u.useEffect(()=>{h(i._container,e.style)},[e.style]),null});k.displayName="GeolocateControl";u.memo(k);function ne(e){const t=v(({mapLib:o})=>new o.NavigationControl(e),{position:e.position});return u.useEffect(()=>{h(t._container,e.style)},[e.style]),null}u.memo(ne);const oe={unit:"metric",maxWidth:100};function A(e){const t=v(({mapLib:o})=>new o.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),u.useEffect(()=>{h(t._container,e.style)},[e.style]),null}A.defaultProps=oe;u.memo(A);export{R as M,se as P,F as _,ae as a};
