import{r as l,j as e}from"./react-rRunGLgB.js";import{E as C}from"./eventemitter3-C4rCq_UG.js";import{P as a}from"./prop-types-CYoxX0Ds.js";import{B as P,O as v}from"./react-bootstrap-C4EoRE5a.js";import{M as z,N as T,a as E,P as M}from"./react-map-gl-BOixWIKJ.js";import{a as j}from"./mapbox-gl-DyFaTYdd.js";import{F as L}from"./react-icons-DQ_zSj0_.js";import{m as A}from"./maplibre-contour-CXWQAzWF.js";import{M as b}from"./react-masonry-css-DU1JT0sv.js";import"./classnames-ELZfJkp_.js";import"./@restart-cUimx4aO.js";import"./dom-helpers-Cqtc25sf.js";import"./react-dom-7db8FyN0.js";import"./scheduler-BNqrtbQi.js";import"./react-transition-group-Ci-xmXQq.js";import"./@babel-G6YR9G09.js";const y=new C;class D extends C{constructor(){super(),this.data=[],this.selectedRecord=null}getAll(){return this.data}getSelectedRecord(){return this.selectedRecord}setData(c){this.data=c,this.emit("change")}setSelectedRecord(c){this.selectedRecord=c,this.emit("change")}}const u=new D;y.on("FETCH_DATA",i=>{u.setData(i)});y.on("SELECT_RECORD",i=>{u.setSelectedRecord(i)});const H=[{id:1,recordist:"Claire",date:"10/10/2025",time:"23:35:00",lat:64.03985877,lon:-138.1501049,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055290/Yukon_River_2_fbi0r9.jpg",field_notes:["The sound of cracking ice echoed through the quiet landscape.","The delicate balance of the frozen river reminded us of nature's transient beauty."]},{id:2,recordist:"Hanna",date:"11/10/2025",time:"00:35:00",lat:64.049004,lon:-139.442815,temperature:"-35°C",conditions:"Cloudy",tags:"Yukon River, underwater",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Iceberg_Calving_-_Hansbreen_Glacier_r1gewz.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055289/field_recording_2_xan6ng.jpg",field_notes:["Clouds whispered ancient tales as they drifted over the river.","The overcast sky added a layer of melancholy to the scene."]},{id:3,recordist:"Miguel",date:"12/10/2025",time:"01:35:00",lat:63.93657,lon:-138.47639,temperature:"-35°C",conditions:"Cloudy",tags:"Klondike River, underwater",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Belcher_Glacier_knpuil.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055289/students_working_5_a43l75.jpg",field_notes:["The sound of flowing water blended with the chill of the glacier.","The interplay between ice and water created a natural symphony."]},{id:4,recordist:"Claire",date:"13/10/2025",time:"23:35:00",lat:63.90152,lon:-137.95093,temperature:"-35°C",conditions:"Snow",tags:"Archives, Interviews",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Grant_Deane_Records_Melting_Ice_xn4mp2.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055290/Yukon_River_1_wsuiqa.jpg",field_notes:["Snow fell silently, framing the winter scene.","Each flake seemed to whisper secrets of the mountain."]},{id:5,recordist:"Joao",date:"14/10/2025",time:"00:35:00",lat:64.55629475,lon:-138.5183446,temperature:"-35°C",conditions:"Cloudy",tags:"Tombstone Territorial Park",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055289/Tombstone_Park_4_l7hfui.jpg",field_notes:["The vast park unfolded with timeless grandeur.","The rustling wind among the pines evoked a mystical aura."]},{id:6,recordist:"Susan",date:"15/10/2025",time:"01:35:00",lat:63.90252,lon:-137.94993,temperature:"-35°C",conditions:"Rain",tags:"Interviews, archives",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/field_recording_3_gulz7r.jpg",field_notes:["Rain intensified the feeling of isolation.","Each drop marked the passage of time in the urban landscape."]},{id:7,recordist:"Ricardo",date:"16/10/2025",time:"23:35:00",lat:64.55635,lon:-138.51845,temperature:"-35°C",conditions:"Cloudy",tags:"Tombstone Territorial Park",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Iceberg_Calving_-_Hansbreen_Glacier_r1gewz.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/Tombstone_Park_3_zieofz.jpg",field_notes:["The park revealed a unique palette of colors.","Clouds intensified the dramatic character of the landscape."]},{id:8,recordist:"Andres",date:"17/10/2025",time:"00:35:00",lat:64.27131,lon:-138.72133,temperature:"-35°C",conditions:"Rain",tags:"Interviews",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Belcher_Glacier_knpuil.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/Tombstone_Park_1_crjb7h.jpg",field_notes:["Rain softened the textures of the surroundings.","The atmosphere was imbued with a calm melancholy."]},{id:9,recordist:"Julia",date:"18/10/2025",time:"01:35:00",lat:63.03995877,lon:-138.1502049,temperature:"-35°C",conditions:"Cloudy",tags:"Klondike River",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Grant_Deane_Records_Melting_Ice_xn4mp2.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/drilling_river_ice_ya1yvt.jpg",field_notes:["The murmur of the river complemented the crisp air.","The contrast between ice and water painted a dynamic scene."]},{id:10,recordist:"Joao",date:"19/10/2025",time:"23:35:00",lat:64.03975877,lon:-139.1500049,temperature:"-35°C",conditions:"Snow",tags:"Klondike River",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Grant_Deane_Records_Melting_Ice_xn4mp2.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055293/students_working_2_ibr7vr.jpg",field_notes:["Snow transformed the landscape into a blank canvas.","The cold merged with the vibrant energy of the scene."]},{id:11,recordist:"Joao",date:"20/10/2025",time:"00:35:00",lat:61.55619475,lon:-138.5182446,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Belcher_Glacier_knpuil.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055282/Yukon_River-5_faolxu.jpg",field_notes:["The recording captured the clarity of a bright day.","Every sound was amplified in the vast openness of the landscape."]},{id:12,recordist:"Susan",date:"21/10/2025",time:"01:35:00",lat:62.55639475,lon:-138.5184446,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Iceberg_Calving_-_Hansbreen_Glacier_r1gewz.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055281/Yukon_River_4_hlp5dg.jpg",field_notes:["The clear sky highlighted the purity of the natural setting.","The transparency of the day created an almost ethereal atmosphere."]},{id:13,recordist:"Ricardo",date:"22/10/2025",time:"23:35:00",lat:65.55649475,lon:-139.5185446,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055291/Yukon_River_3_xoonfg.jpg",field_notes:["The soundscape revealed a delicate balance of nature.","Silence and subtle sounds merged to form a harmonious whole."]}],q=async()=>{try{await new Promise(c=>setTimeout(c,500));const i=H;y.emit("FETCH_DATA",i)}catch(i){console.error("Error fetching dummy data:",i)}},_=i=>{y.emit("SELECT_RECORD",i)},R=({record:i})=>{const[c,o]=l.useState(!1),[f,r]=l.useState(!1),x=()=>{o(h=>!h)},d=()=>r(!1),g=()=>{_(i),r(!0)};return e.jsxs("div",{className:"recording-card",onClick:x,id:`record-${i.id}`,children:[e.jsx("img",{src:i.pictureFilePath,alt:`Picture for ${i.recordist}`,className:"recording-image glitch-image",loading:"lazy",onError:h=>{h.target.src="https://dummyimage.com/300x300/cccccc/ffffff&text=No+Image"}}),c?e.jsxs("div",{className:"recording-details",children:[e.jsx("h3",{children:i.id}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",i.date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," Lat: ",i.lat,", Lon: ",i.lon]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Conditions:"})," ",i.conditions]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Key Words:"})," ",i.tags||i["Key Words"]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recordist:"})," ",i.recordist]}),e.jsxs("audio",{controls:!0,autoPlay:!0,children:[e.jsx("source",{src:i.audioFilePath,type:"audio/mpeg"}),"Your browser does not support the audio element."]}),e.jsx(P,{variant:"dark",onClick:g,children:"Field Notes"})]}):e.jsx("div",{className:"preview-info",children:e.jsxs("h3",{className:"recording-id",children:[" ",i.id]})}),e.jsxs(v,{show:f,onHide:d,backdrop:"static",children:[e.jsx(v.Header,{closeButton:!0,children:e.jsxs(v.Title,{children:["Field Notes for: ",i.id]})}),e.jsxs(v.Body,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Recordist:"})," ",i.recordist]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",i.date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," Lat: ",i.lat,", Lon: ",i.lon]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Conditions:"})," ",i.conditions]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Key Words:"})," ",i.tags||i["Key Words"]]}),e.jsxs("audio",{controls:!0,autoPlay:!0,children:[e.jsx("source",{src:i.audioFilePath,type:"audio/mpeg"}),"Your browser does not support the audio element."]}),e.jsx("h5",{children:"Field Notes:"}),e.jsx("ul",{children:i.field_notes.map((h,s)=>e.jsx("li",{children:h},s))})]})]})]})};R.propTypes={record:a.shape({id:a.oneOfType([a.string,a.number]).isRequired,pictureFilePath:a.string.isRequired,audioFilePath:a.string.isRequired,recordist:a.string.isRequired,date:a.string.isRequired,time:a.string.isRequired,lat:a.oneOfType([a.string,a.number]).isRequired,lon:a.oneOfType([a.string,a.number]).isRequired,conditions:a.string.isRequired,tags:a.string,"Key Words":a.string,field_notes:a.arrayOf(a.string).isRequired}).isRequired};j.accessToken="pk.eyJ1IjoiaWtlcmx1bmEiLCJhIjoiY203NjMwZHptMHAzaDJrcXlrbnNuMHJlZiJ9.hkoRlM6gQ-BflcGjpI40GA";const I=()=>{const[i,c]=l.useState({latitude:64.049004,longitude:-139.442815,zoom:6.5,pitch:0,bearing:0,width:"100%",height:"100%",hash:!0}),[o,f]=l.useState(u.getAll()),[r,x]=l.useState(u.getSelectedRecord()),d=l.useRef(null);l.useEffect(()=>{const s=()=>{f(u.getAll()),x(u.getSelectedRecord())};return u.on("change",s),()=>u.off("change",s)},[]);const g=()=>{const s=d.current.getMap(),m=new A.DemSource({url:"https://demotiles.maplibre.org/terrain-tiles/{z}/{x}/{y}.png",encoding:"mapbox",maxzoom:12,worker:!0});m.setupMaplibre(j),s.getSource("hillshadeSource")||s.addSource("hillshadeSource",{type:"raster-dem",tiles:[m.sharedDemProtocolUrl],tileSize:512,maxzoom:12}),s.getLayer("hills")||s.addLayer({id:"hills",type:"hillshade",source:"hillshadeSource",layout:{visibility:"visible"},paint:{"hillshade-exaggeration":5}}),s.getSource("contourSourceFeet")||s.addSource("contourSourceFeet",{type:"vector",tiles:[m.contourProtocolUrl({multiplier:3.28084,overzoom:1,thresholds:{11:[200,1e3],12:[100,500],13:[100,500],14:[50,200],15:[20,100]},elevationKey:"ele",levelKey:"level",contourLayer:"contours"})],maxzoom:15}),s.getLayer("contours")||s.addLayer({id:"contours",type:"line",source:"contourSourceFeet","source-layer":"contours",paint:{"line-opacity":.5,"line-width":["match",["get","level"],1,1,.5]}}),s.getLayer("contour-text")||s.addLayer({id:"contour-text",type:"symbol",source:"contourSourceFeet","source-layer":"contours",filter:[">",["get","level"],0],paint:{"text-halo-color":"white","text-halo-width":1},layout:{"symbol-placement":"line","text-size":10,"text-field":["concat",["number-format",["get","ele"],{}],"'"],"text-font":["Noto Sans Bold"]}})};l.useEffect(()=>{r&&d.current&&d.current.getMap().flyTo({center:[r.lon,r.lat],zoom:8,speed:1.2,curve:1,easing:m=>m})},[r]);const h=s=>{_(s)};return e.jsx("div",{className:"map-wrapper",style:{height:"500px",width:"100%"},children:e.jsxs(z,{ref:d,...i,mapStyle:"mapbox://styles/ikerluna/cm7b6ykln005d01s7fdffhda4",mapboxApiAccessToken:j.accessToken,onLoad:g,onMove:s=>c(s.viewState),onError:s=>console.error("Mapbox error:",s),interactive:!0,children:[e.jsx(T,{position:"top-right"}),o.map(s=>e.jsx(E,{latitude:s.lat,longitude:s.lon,children:e.jsxs("div",{onClick:()=>h(s),style:{cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(L,{size:40,color:"magenta"}),e.jsx("span",{style:{position:"absolute",color:"white",fontWeight:"bold",fontSize:"0.8rem"},children:s.id})]})},s.id)),r&&e.jsx(M,{className:"custom-popup",latitude:r.lat,longitude:r.lon,closeButton:!0,closeOnClick:!1,onClose:()=>_(null),offsetTop:-10,children:e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"10px"},children:[e.jsxs("h3",{children:["ID: ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recordist:"})," ",r.recordist]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",r.date]})]}),e.jsxs("audio",{controls:!0,style:{width:"100%"},children:[e.jsx("source",{src:r.audioFilePath,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]})})]})})},se=()=>{const[i,c]=l.useState([]),[o,f]=l.useState({recordist:"",tags:"",conditions:"",date:""}),[r,x]=l.useState([]),[d,g]=l.useState(null),h=l.useCallback(()=>{const t=u.getAll()||[];c(t)},[]);l.useEffect(()=>(q(),u.on("change",h),()=>u.off("change",h)),[h]);const s=[...new Set(i.map(t=>t.recordist))],m=[...new Set(i.flatMap(t=>t.tags?t.tags.split(",").map(n=>n.trim()):[]))],k=[...new Set(i.map(t=>t.conditions))],F=[...new Set(i.map(t=>t.date))];l.useEffect(()=>{let t=i;o.recordist&&(t=t.filter(n=>n.recordist===o.recordist)),o.tags&&(t=t.filter(n=>n.tags&&n.tags.toLowerCase().includes(o.tags.toLowerCase()))),o.conditions&&(t=t.filter(n=>n.conditions===o.conditions)),o.date&&(t=t.filter(n=>n.date===o.date)),x(t)},[i,o]);const p=(t,n)=>{f(w=>({...w,[t]:w[t]===n?"":n}))},N=(t,n)=>{d&&d.id===t&&d.view===n?g(null):g({id:t,view:n})},S={default:3,1100:2,700:1};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"mt-6",style:{textAlign:"justify",paddingTop:"48px",paddingBottom:"24px",paddingLeft:"32px",paddingRight:"32px"},children:[e.jsx("h2",{className:"title",children:"Field Recordings"}),e.jsxs("div",{className:"row mt-5",children:[e.jsxs("div",{className:"col-md-2",children:[e.jsx("h3",{className:"subtitles",children:"Recordist"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${o.recordist?"":"active"}`,onClick:()=>p("recordist",""),children:"All"}),s.map(t=>e.jsx("button",{className:`filter-btn ${o.recordist===t?"active":""}`,onClick:()=>p("recordist",t),children:t},t))]})}),e.jsx("h3",{className:"subtitles",children:"Key Words"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${o.tags?"":"active"}`,onClick:()=>p("tags",""),children:"All"}),m.map(t=>e.jsx("button",{className:`filter-btn ${o.tags===t?"active":""}`,onClick:()=>p("tags",t),children:t},t))]})}),e.jsx("h3",{className:"subtitles",children:"Conditions"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${o.conditions?"":"active"}`,onClick:()=>p("conditions",""),children:"All"}),k.map(t=>e.jsx("button",{className:`filter-btn ${o.conditions===t?"active":""}`,onClick:()=>p("conditions",t),children:t},t))]})}),e.jsx("h3",{className:"subtitles",children:"Date"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${o.date?"":"active"}`,onClick:()=>p("date",""),children:"All"}),F.map(t=>e.jsx("button",{className:`filter-btn ${o.date===t?"active":""}`,onClick:()=>p("date",t),children:t},t))]})})]}),e.jsx("div",{className:"col-md-5",children:e.jsx("div",{className:"recording-list",children:r.length>0?e.jsx(b,{breakpointCols:S,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:r.map(t=>e.jsx(R,{record:t,expanded:d&&d.id===t.id,viewMode:d&&d.id===t.id?d.view:null,onToggle:N},t.id))}):e.jsx("p",{children:"No recordings available."})})}),e.jsx("div",{className:"col-md-5",children:e.jsx(b,{breakpointCols:{default:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:e.jsx("div",{className:"map-masonry-item",children:e.jsx(I,{})})})})]})]})})};export{se as default};
