import{a as d,j as e}from"./react-V8IiPZyx.js";import{E as w}from"./eventemitter3-DMllpG5g.js";import{P as a}from"./prop-types-D0pSn4ZB.js";import{M as z,N as S,a as T,P as E}from"./react-map-gl-mKWdT8YR.js";import{a as b}from"./mapbox-gl--tciIPl5.js";import{F as A}from"./react-icons-Bl3RMTbh.js";import"./cookie-BX9QSSmL.js";import"./react-dom-b-nR2FO5.js";import"./scheduler-BNqrtbQi.js";const g=new w;class M extends w{constructor(){super(),this.data=[],this.selectedRecord=null}getAll(){return this.data}getSelectedRecord(){return this.selectedRecord}setData(l){this.data=l,this.emit("change")}setSelectedRecord(l){this.selectedRecord=l,this.emit("change")}}const c=new M;g.on("FETCH_DATA",i=>{c.setData(i)});g.on("SELECT_RECORD",i=>{c.setSelectedRecord(i)});const D=[{id:1,recordist:"Claire",date:"10/10/2025",time:"23:35:00",lat:64.03985877,lon:-138.1501049,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055290/Yukon_River_2_fbi0r9.jpg"},{id:2,recordist:"Hanna",date:"11/10/2025",time:"00:35:00",lat:64.049004,lon:-139.442815,temperature:"-35°C",conditions:"Cloudy",tags:"Yukon River",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Iceberg_Calving_-_Hansbreen_Glacier_r1gewz.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055289/field_recording_2_xan6ng.jpg"},{id:3,recordist:"Miguel",date:"12/10/2025",time:"01:35:00",lat:63.93657,lon:-138.47639,temperature:"-35°C",conditions:"Cloudy",tags:"Klondike River",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Belcher_Glacier_knpuil.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055289/students_working_5_a43l75.jpg"},{id:4,recordist:"Claire",date:"13/10/2025",time:"23:35:00",lat:63.90152,lon:-137.95093,temperature:"-35°C",conditions:"Snow",tags:"Field Work",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Grant_Deane_Records_Melting_Ice_xn4mp2.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055290/Yukon_River_1_wsuiqa.jpg"},{id:5,recordist:"Joao",date:"14/10/2025",time:"00:35:00",lat:64.55629475,lon:-138.5183446,temperature:"-35°C",conditions:"Cloudy",tags:"Tombstone Territorial Park",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055289/Tombstone_Park_4_l7hfui.jpg"},{id:6,recordist:"Susan",date:"15/10/2025",time:"01:35:00",lat:63.90152,lon:-137.95093,temperature:"-35°C",conditions:"Rain",tags:"Interviews",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/field_recording_3_gulz7r.jpg"},{id:7,recordist:"Ricardo",date:"16/10/2025",time:"23:35:00",lat:64.55625,lon:-138.51835,temperature:"-35°C",conditions:"Cloudy",tags:"Tombstone Territorial Park",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Iceberg_Calving_-_Hansbreen_Glacier_r1gewz.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/Tombstone_Park_3_zieofz.jpg"},{id:8,recordist:"Andres",date:"17/10/2025",time:"00:35:00",lat:64.27131,lon:-138.72133,temperature:"-35°C",conditions:"Rain",tags:"Interviews",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Belcher_Glacier_knpuil.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/Tombstone_Park_1_crjb7h.jpg"},{id:9,recordist:"Julia",date:"18/10/2025",time:"01:35:00",lat:64.03985877,lon:-138.1501049,temperature:"-35°C",conditions:"Cloudy",tags:"Klondike River",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Grant_Deane_Records_Melting_Ice_xn4mp2.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055288/drilling_river_ice_ya1yvt.jpg"},{id:10,recordist:"Joao",date:"19/10/2025",time:"23:35:00",lat:64.03985877,lon:-138.1501049,temperature:"-35°C",conditions:"Snow",tags:"Klondike River",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Grant_Deane_Records_Melting_Ice_xn4mp2.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055293/students_working_2_ibr7vr.jpg"},{id:11,recordist:"Joao",date:"20/10/2025",time:"00:35:00",lat:64.55629475,lon:-138.5183446,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Belcher_Glacier_knpuil.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055282/Yukon_River-5_faolxu.jpg"},{id:12,recordist:"Susan",date:"21/10/2025",time:"01:35:00",lat:64.55629475,lon:-138.5183446,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316581/Iceberg_Calving_-_Hansbreen_Glacier_r1gewz.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055281/Yukon_River_4_hlp5dg.jpg"},{id:13,recordist:"Ricardo",date:"22/10/2025",time:"23:35:00",lat:64.55629475,lon:-138.5183446,temperature:"-35°C",conditions:"Clear",tags:"Field Recording",audioFilePath:"https://res.cloudinary.com/dw1ht0zfd/video/upload/v1739316582/Hornshund_Underwater_c7abfh.mp3",pictureFilePath:"https://res.cloudinary.com/dw1ht0zfd/image/upload/v1739055291/Yukon_River_3_xoonfg.jpg"}],L=async()=>{try{await new Promise(l=>setTimeout(l,500));const i=D;g.emit("FETCH_DATA",i)}catch(i){console.error("Error fetching dummy data:",i)}},_=i=>{g.emit("SELECT_RECORD",i)},y=({record:i})=>{const[l,s]=d.useState(!1),h=()=>{s(n=>!n)};return e.jsxs("div",{className:"recording-card",onClick:h,id:`record-${i.id}`,children:[e.jsx("img",{src:i.pictureFilePath,alt:`Picture for ${i.recordist}`,className:"recording-image glitch-image",loading:"lazy",onError:n=>{n.target.src="https://dummyimage.com/300x300/cccccc/ffffff&text=No+Image"}}),l?e.jsxs("div",{className:"recording-details",children:[e.jsx("h3",{children:i.id}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",i.date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," Lat: ",i.lat,", Lon: ",i.lon]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Conditions:"})," ",i.conditions]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",i.Duration||i.duration]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Key Words:"})," ",i.tags||i["Key Words"]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recordist:"})," ",i.recordist]}),e.jsxs("audio",{controls:!0,autoPlay:!0,children:[e.jsx("source",{src:i.audioFilePath,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}):e.jsx("div",{className:"preview-info",children:e.jsxs("h3",{className:"recording-id",children:[" ",i.id]})})]})};y.propTypes={record:a.shape({id:a.oneOfType([a.string,a.number]).isRequired,pictureFilePath:a.string.isRequired,audioFilePath:a.string.isRequired,recordist:a.string.isRequired,date:a.string.isRequired,time:a.string.isRequired,lat:a.oneOfType([a.string,a.number]).isRequired,lon:a.oneOfType([a.string,a.number]).isRequired,conditions:a.string.isRequired,Duration:a.string,duration:a.string,tags:a.string,"Key Words":a.string}).isRequired};b.accessToken="pk.eyJ1IjoiaWtlcmx1bmEiLCJhIjoiY203NjMwZHptMHAzaDJrcXlrbnNuMHJlZiJ9.hkoRlM6gQ-BflcGjpI40GA";const H=()=>{const[i,l]=d.useState({latitude:64.049004,longitude:-139.442815,zoom:6.5,pitch:0,bearing:0,width:"100vh",height:"100vh"}),[s,h]=d.useState(c.getAll()),[n,f]=d.useState(c.getSelectedRecord()),m=d.useRef(null);d.useEffect(()=>{const o=()=>{h(c.getAll()),f(c.getSelectedRecord())};return c.on("change",o),()=>c.off("change",o)},[]);const x=()=>{const o=m.current.getMap();o.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),o.setTerrain({source:"mapbox-dem",exaggeration:1.5}),o.addLayer({id:"hillshade",source:"mapbox-dem",type:"hillshade"})},u=o=>{_(o)};return e.jsxs(z,{ref:m,...i,mapStyle:"mapbox://styles/ikerluna/cm7b6ykln005d01s7fdffhda4",mapboxApiAccessToken:b.accessToken,onLoad:x,onMove:o=>l(o.viewState),onError:o=>console.error("Mapbox error:",o),interactive:!0,children:[e.jsx(S,{position:"top-right"}),s.map(o=>e.jsx(T,{latitude:o.lat,longitude:o.lon,children:e.jsx("div",{onClick:()=>u(o),style:{cursor:"pointer"},children:e.jsx(A,{size:30,color:n&&o.id===n.id?"black":"grey"})})},o.id)),n&&e.jsx(E,{className:"custom-popup",latitude:n.lat,longitude:n.lon,closeButton:!0,closeOnClick:!1,onClose:()=>_(null),offsetTop:-10,children:e.jsxs("div",{children:[e.jsx("div",{style:{textAlign:"center"},children:e.jsx("h3",{children:n.id})}),e.jsxs("audio",{controls:!0,autoPlay:!0,children:[e.jsx("source",{src:n.audioFilePath,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]})})]})},W=()=>{const[i,l]=d.useState([]),[s,h]=d.useState({recordist:"",tags:"",conditions:"",date:""}),[n,f]=d.useState([]),[m,x]=d.useState(!1),[u,o]=d.useState(null),v=d.useCallback(()=>{const t=c.getAll()||[];l(t)},[]);d.useEffect(()=>(L(),c.on("change",v),()=>c.off("change",v)),[v]);const C=[...new Set(i.map(t=>t.recordist))],R=[...new Set(i.flatMap(t=>t.tags?t.tags.split(",").map(r=>r.trim()):[]))],F=[...new Set(i.map(t=>t.conditions))],P=[...new Set(i.map(t=>t.date))];d.useEffect(()=>{let t=i;s.recordist&&(t=t.filter(r=>r.recordist===s.recordist)),s.tags&&(t=t.filter(r=>r.tags&&r.tags.toLowerCase().includes(s.tags.toLowerCase()))),s.conditions&&(t=t.filter(r=>r.conditions===s.conditions)),s.date&&(t=t.filter(r=>r.date===s.date)),f(t)},[i,s]);const p=(t,r)=>{h(j=>({...j,[t]:j[t]===r?"":r}))},k=(t,r)=>{u&&u.id===t&&u.view===r?o(null):o({id:t,view:r})};d.useEffect(()=>{const t=()=>x(window.pageYOffset>300);return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]);const N=()=>window.scrollTo({top:0,behavior:"smooth"});return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"mt-6",style:{textAlign:"justify",paddingTop:"48px",paddingBottom:"24px",paddingLeft:"32px",paddingRight:"32px"},children:[e.jsx("h2",{className:"title",children:"Field Recordings"}),e.jsxs("div",{className:"row mt-5",children:[e.jsxs("div",{className:"col-md-2",children:[e.jsx("h3",{className:"subtitles",children:"Recordist"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${s.recordist?"":"active"}`,onClick:()=>p("recordist",""),children:"All"}),C.map(t=>e.jsx("button",{className:`filter-btn ${s.recordist===t?"active":""}`,onClick:()=>p("recordist",t),children:t},t))]})}),e.jsx("h3",{className:"subtitles",children:"Key Words"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${s.tags?"":"active"}`,onClick:()=>p("tags",""),children:"All"}),R.map(t=>e.jsx("button",{className:`filter-btn ${s.tags===t?"active":""}`,onClick:()=>p("tags",t),children:t},t))]})}),e.jsx("h3",{className:"subtitles",children:"Conditions"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${s.conditions?"":"active"}`,onClick:()=>p("conditions",""),children:"All"}),F.map(t=>e.jsx("button",{className:`filter-btn ${s.conditions===t?"active":""}`,onClick:()=>p("conditions",t),children:t},t))]})}),e.jsx("h3",{className:"subtitles",children:"Date"}),e.jsx("hr",{}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:`filter-btn ${s.date?"":"active"}`,onClick:()=>p("date",""),children:"All"}),P.map(t=>e.jsx("button",{className:`filter-btn ${s.date===t?"active":""}`,onClick:()=>p("date",t),children:t},t))]})})]}),e.jsx("div",{className:"col-md-5",children:e.jsx("div",{className:"recording-list",children:n.length>0?n.map(t=>e.jsx(y,{record:t,expanded:u&&u.id===t.id,viewMode:u&&u.id===t.id?u.view:null,onToggle:k},t.id)):e.jsx("p",{children:"No recordings available."})})}),e.jsx("div",{className:"col-md-5",children:e.jsx(H,{})})]})]}),e.jsx("button",{className:`scroll-to-top ${m?"show":""}`,onClick:N,"aria-label":"Scroll to top",children:"↑"})]})};export{W as default};
